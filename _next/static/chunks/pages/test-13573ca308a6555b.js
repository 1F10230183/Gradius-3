(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[378],{6558:function(t,e,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/test",function(){return s(2131)}])},2131:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return y}});var o=s(5893),n=s(24),l=s(5371),a=s(8239),r=s(7294),c=s(2237),i=s(1290),u=s(4607),_=s.n(u);let d=()=>{let[t,e]=(0,r.useState)(0),[s,n]=(0,r.useState)(300),[l,a]=(0,r.useState)(500),[u,d]=(0,r.useState)(300),[x,y]=(0,r.useState)([]),[h,p]=(0,r.useState)([]),f=async t=>{let s=await i.x.player.$post({body:t});e(s.PlayerPos.x),n(s.PlayerPos.y)};(0,r.useEffect)(()=>{let t=async()=>{let t={EnemyPos:{x:l,y:u},radius:75},e=await i.x.enemy.$post({body:t});a(e.EnemyPos.x),d(e.EnemyPos.y);let s=[...x,t];y(s)},e=setInterval(t,500);return()=>{clearInterval(e)}},[l,u,x]);let m=async()=>{let e=await i.x.player.shoot.$post({body:{PlayerPos:{x:t,y:s},MoveInput:"none"}}),o=[...h,e];p(o)};return(0,r.useEffect)(()=>{let t=()=>{let t=h.map(t=>({...t,x:t.x+t.speed}));p(t)},e=requestAnimationFrame(t);return()=>{cancelAnimationFrame(e)}},[h]),(0,r.useEffect)(()=>{let t=function(t,e){for(let s=0;s<t.length;s++)for(let o=0;o<e.length;o++){let n=t[s].x-e[o].EnemyPos.x,l=t[s].y-e[o].EnemyPos.y,a=Math.sqrt(n*n+l*l);if(a<t[s].radius+e[o].radius-10)return t.splice(s,1),e.splice(o,1),console.log("hit",t.splice(s,1),e.splice(o,1)),{Bullets:t,Enemys:e}}return{Bullets:t,Enemys:e}}(h,x);p(t.Bullets),y(t.Enemys)},[h,x]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(c.Hf,{width:1e3,height:1e3,stroke:"black",children:(0,o.jsxs)(c.mh,{children:[(0,o.jsx)(c.Cd,{x:t,y:s,stroke:"black",fill:"blue",radius:50}),(0,o.jsx)(c.Cd,{x:l,y:u,stroke:"black",fill:"red",radius:75}),h.map((t,e)=>(0,o.jsx)(c.Cd,{x:t.x,y:t.y,stroke:"black",fill:"green",radius:t.radius},e))]})}),(0,o.jsxs)("div",{className:_().board,children:[(0,o.jsxs)("div",{className:_().container,children:[(0,o.jsx)("div",{className:_().button}),(0,o.jsx)("div",{className:"".concat(_().button," ").concat(_().up),onClick:()=>{f({PlayerPos:{x:t,y:s},MoveInput:"up"}),console.log(s)}}),(0,o.jsx)("div",{className:_().button}),(0,o.jsx)("div",{className:"".concat(_().button," ").concat(_().left),onClick:()=>{f({PlayerPos:{x:t,y:s},MoveInput:"left"}),console.log(s)}}),(0,o.jsx)("div",{className:_().button,children:"ã€‡"}),(0,o.jsx)("div",{className:"".concat(_().button," ").concat(_().right),onClick:()=>{f({PlayerPos:{x:t,y:s},MoveInput:"right"}),console.log(s)}}),(0,o.jsx)("div",{className:_().button}),(0,o.jsx)("div",{className:"".concat(_().button," ").concat(_().down),onClick:()=>{f({PlayerPos:{x:t,y:s},MoveInput:"down"}),console.log(s)}}),(0,o.jsx)("div",{className:_().button})]}),(0,o.jsx)("div",{className:_().shoot,onClick:()=>{m(),console.log(s)},children:"shoot"})]})]})},x=()=>{let[t]=(0,n.KO)(l.L);return t?(0,o.jsx)(d,{}):(0,o.jsx)(a.g,{visible:!0})};var y=x},4607:function(t){t.exports={container:"test_container__hfwMK",button:"test_button__Y5B6Q",shoot:"test_shoot__nwVU6",board:"test_board__R0dud",up:"test_up__tuNg3",left:"test_left__bSKdk",right:"test_right__a89_B",down:"test_down__lL7gQ",upperLeft:"test_upperLeft__1CDko",upperRight:"test_upperRight__mhmNK",lowerLeft:"test_lowerLeft__4zM_6",lowerRight:"test_lowerRight__bb5Xa"}}},function(t){t.O(0,[237,774,888,179],function(){return t(t.s=6558)}),_N_E=t.O()}]);